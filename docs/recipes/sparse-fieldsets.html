<!DOCTYPE html><html><head><meta charset="UTF-8"><meta content="minimum-scale=1.0, width=device-width" name="viewport"><meta name="description" content=""><title>Sparse Fieldsets - Evolvable APIs</title><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700|Roboto+Mono"><link rel="stylesheet" href="/vendor/icon-12/icon-12.css"><link rel="stylesheet" href="/vendor/galano/galano.css"><link rel="stylesheet" href="/vendor/icon-16/icon-16.css"><link rel="stylesheet" href="/vendor/senna/senna.css"><link rel="stylesheet" href="/vendor/codemirror/lib/codemirror.css"><link rel="stylesheet" href="/vendor/codemirror/theme/dracula.css"><script src="/js/bundles/shared.electric.js"></script><script src="/vendor/senna/senna.js"></script><script src="/vendor/codemirror/lib/codemirror.js"></script><script src="/vendor/codemirror/mode/css/css.js"></script><script src="/vendor/codemirror/mode/javascript/javascript.js"></script><script src="/vendor/codemirror/mode/xml/xml.js"></script><link rel="stylesheet" href="/styles/main.css"></head><body data-senna=""><div data-senna-surface="" id="wrapper"><div class="senna-loading-bar"></div><div id="pageComponent"><div class="main"><main class="guide"><div class="docs"><nav class="topbar topbar-light topbar-docs"><div class="topbar-logo"><a class="topbar-logo-link" href="/"><span class="topbar-logo-icon icon-16-hammer"></span><h3 class="topbar-logo-text">Evolvable APIs</h3></a></div><nav class="topbar-menu"><button class="topbar-toggle">Menu</button><ul class="topbar-list"><li class="topbar-item"><a class="topbar-link topbar-link-selected" href="/docs/introduction/index.html" target="undefined"><span>Docs</span></a></li><li class="topbar-item"><a class="topbar-link " href="/updates/" target="undefined"><span>Updates</span></a></li></ul></nav></nav><div class="ribbon-container"><div class="ribbon ribbon-accent">Beta</div></div><nav class="sidebar"><a class="sidebar-header toggler-header-collapsed"><span class="sidebar-icon icon-16-menu"></span><span>Docs Menu</span><span class="sidebar-icon-right"><span class="icon-12-arrow-down-short"></span><span class="icon-12-arrow-up-short"></span></span></a><div class="sidebar-toggler-content toggler-collapsed"><div class="sidebar-search"><div class="page-autocomplete"><div class="form-group"><div class="input-inner-addon input-inner-addon-right"><input autocomplete="off" class="form-control" name="q" placeholder="Search Docs" ref="input" required="" type="text"><span class="input-inner-icon-helper icon-16-magnifier"></span></div></div></div></div><nav class=""><ul class="sidebar-list sidebar-list-1"><li class="sidebar-item"><a class="sidebar-link " href="/docs/introduction/"><span class="sidebar-icon icon-16-streams"></span><span>Introduction to Evolvable APIs</span></a><nav class=""><ul class="sidebar-list sidebar-list-1"><li class="sidebar-item"><a class="sidebar-link " href="/docs/introduction/techniques.html"><span class="sidebar-icon icon-16-flash"></span><span>Useful techniques to make your APIs evolvable</span></a></li><li class="sidebar-item"><a class="sidebar-link " href="/docs/introduction/versioning.html"><span class="sidebar-icon icon-16-flash"></span><span>Versioning your API contract</span></a></li></ul></nav></li><li class="sidebar-item active"><a class="sidebar-link sidebar-link-selected" href="/docs/recipes/"><span class="sidebar-icon icon-16-streams"></span><span>Recipes (towards Evolvable APIs)</span></a><nav class=""><ul class="sidebar-list sidebar-list-1"><li class="sidebar-item"><a class="sidebar-link " href="/docs/recipes/pagination.html"><span class="sidebar-icon icon-16-flash"></span><span>Pagination</span></a></li><li class="sidebar-item active"><a class="sidebar-link sidebar-link-selected" href="/docs/recipes/sparse-fieldsets.html"><span class="sidebar-icon icon-16-flash"></span><span>Sparse Fieldsets</span></a></li></ul></nav></li></ul></nav></div></nav><div class="sidebar-offset"><header class="guide-header"><div class="container-hybrid"><h1 class="title">Sparse Fieldsets</h1></div></header><div class="container-hybrid"><div class="docs-guide row"><div class="docs-content col-xs-16 col-md-9"><div class="guide-content"><article id="1"><h2>Context</h2><p>Sometimes our API returns a representation for a resource which includes a lot of information that the API provider keeps on the information, but if you think on the different kind of consumers that you will serve and, more specifically, the possible constraints that they have, maybe it’s useful if your API allows them to specify a shorter list of attributes that they want to retrieve (instead of the whole representation of the resource).</p></article><article id="2"><h2>Need</h2><p>For example, think on an IoT device, which is interested in using just a single property (or a few information) of the resource for which is requesting a representation. If you also take into account that maybe the device is sending the request (and retrieving the response) using a connection that does not has very good bandwidth, it makes more sense to allow to send back just 1Kb of data, that corresponds to the information that the consumer really is interested in, instead of -let’s say- the 14kb of data used for the represent the resource in its full extend.</p><p>Another scenario in which filtering this feature for your API could be useful is when a mobile application is retrieving a representation of a resource, but, because the space constraints of the screen in which that information will be displayed, some of the attributes will not be rendered. Here, the mobile app -your API customer in this case- will benefit of a more effective bandwidth usage if they can just inform your API which information they are interested in.</p><p>So, how the API provider can allow the customer to specify the specific information that they want in the response?</p><p>Let’s start from our service that returns the information for a member (a person) of our site:</p><div class="code-container"><button class="btn btn-sm btn-copy"><span class="icon-12-overlap"></span></button><pre><code class="code" data-mode="text" ref="code">GET /api/member/15</code></pre></div><p>And the server’s response includes the following representation of the requested person:</p><div class="code-container"><button class="btn btn-sm btn-copy"><span class="icon-12-overlap"></span></button><pre><code class="code" data-mode="javascript" ref="code">{
  "gender": "female",
  "alias": "Sophie",
  "name": "Sophia Hart",
  "jobTitle" : "Senior Executive",
  "birthDate": "1975-04-12T00:00Z",
  "birthPlace" : {
    "@type": "Place",
    "address": {
      "@type": "PostalAddress",
      "addressLocality": "Philadelphia",
      "addressRegion": "PA"
    }
  },
  "email": "sophia.hart@example.com",
  "telephone": "555-984-394"
}</code></pre></div><p>Let’s say that the customer is just going to show the contact data for the user: the name, the job title and email and phone if they are present.</p></article><article id="3"><h2>Solution</h2><p>We can prepare the API so that the list of requested fields can be specified in the URL of the request, using the fields param with a comma separated list of the attributes.</p><div class="code-container"><button class="btn btn-sm btn-copy"><span class="icon-12-overlap"></span></button><pre><code class="code" data-mode="text" ref="code">GET /api/member/15?fields=name,jobTitle,email,telephone</code></pre></div><p>And the API provider will reply with a partial response like the following one:</p><div class="code-container"><button class="btn btn-sm btn-copy"><span class="icon-12-overlap"></span></button><pre><code class="code" data-mode="javascript" ref="code">{
  "name": "Sophia Hart",
  "jobTitle" : "Senior Executive",
  "email": "sophia.hart@example.com",
  "telephone": "555-984-394"
}</code></pre></div><p>For this feature, it’s really useful the use of Shared Vocabularies (i.e resources represented following the definition in <a href="http://schema.org/">schema.org</a>) it will allow the client to know beforehand the list of fields that wants in the response, even without doing any initial request to examine the structure of the response.</p><p>The usefulness of this feature can be even better when we add this support to collections. For example compare:</p><div class="code-container"><button class="btn btn-sm btn-copy"><span class="icon-12-overlap"></span></button><pre><code class="code" data-mode="text" ref="code">GET api/members</code></pre></div><p>And the subsequent response with all the information:</p><div class="code-container"><button class="btn btn-sm btn-copy"><span class="icon-12-overlap"></span></button><pre><code class="code" data-mode="javascript" ref="code">{
   "members" : [
      {
        "gender": "female",
        "alias": "Sophie",
        "name": "Sophia Hart",
        "jobTitle" : "Senior Executive",
        "birthDate": "1975-04-12T00:00Z",
        "birthPlace" : {
          "@type": "Place",
          "address": {
            "@type": "PostalAddress",
            "addressLocality": "Philadelphia",
            "addressRegion": "PA"
          }
        },
        "email": "sophia.hart@example.com",
        "telephone": "555-984-394"
      },
      {
        "gender": "male",
        "alias": "jdoe",
        "name": "John Doe",
        "jobTitle": "Sales Manager",
        "birthDate": "1977-03-15T00:00Z",
        "birthPlace" : {
          "@type": "Place",
          "address": {
            "@type": "PostalAddress",
            "addressLocality": "Los Angeles",
            "addressRegion": "LA"
          }
        },
        "email": "john.doe@email.com",
        "telephone": "555-984-394"
      }     
   ]
}</code></pre></div><p>With a request in which your customer is asking just for the specific information that it’s going to show or use on a table to the user:</p><div class="code-container"><button class="btn btn-sm btn-copy"><span class="icon-12-overlap"></span></button><pre><code class="code" data-mode="text" ref="code">GET api/members?fields=name,jobTitle</code></pre></div><div class="code-container"><button class="btn btn-sm btn-copy"><span class="icon-12-overlap"></span></button><pre><code class="code" data-mode="javascript" ref="code">{
   "members" : [
      {
        "name": "Sophia Hart",
        "jobTitle" : "Senior Executive"
      },
      {
        "name": "John Doe",
        "jobTitle": "Sales Manager"
      }     
   ]
}</code></pre></div><p></p></article><input type="hidden" value="Sparse Fieldsets"><input type="hidden" value="Evolvable APIs"></div><div class="contribute"><div class="contribute-img"><span class="icon-16-github"></span></div><div class="contribute-text"><p>Contribute on Github! <a href="https://github.com/liferay/evolvable-apis.org/tree/master/src/pages/docs/recipes/sparse-fieldsets.md" class="contribute-link" target="_blank">Edit this section</a>.</p></div></div></div><nav class="col-xs-16 col-md-offset-2 col-md-5"><div class="docs-nav-container"><div class="affix-top docs-nav"><div ref="readingContainer"></div></div></div></nav></div></div></div></div></main></div></div><script src="/js/bundles/NzuBp.js"></script><script>var data = '{"pageLocation":"index.children.docs.children.recipes.children.sparse-fieldsets","site":{"title":"Evolvable APIs","githubRepo":"liferay/evolvable-apis.org","googleAnalytics":"UA-37033501-12","index":{"title":"Home","description":"Embrace rapid evolution without breaking consumers.","srcFilePath":"src/pages/index.soy","id":"pages","location":"/./","url":"/./","children":{"docs":{"title":"Docs","url":"/docs/introduction/index.html","layout":false,"srcFilePath":"src/pages/docs/index.soy","id":"docs","location":"/docs/","customURL":true,"children":{"search":{"description":"Documentation search results.","hidden":true,"title":"Search","srcFilePath":"src/pages/docs/search.soy","id":"search","location":"/docs/search.html","url":"/docs/search.html"},"recipes":{"title":"Recipes (towards Evolvable APIs)","description":"Making an API Evolvable is about how many different challenges are designed or implemented when we build it. Maybe you do not need to solve all of them for your case. In this section, we will provide some individual recipes on how to address each of this facets.","layout":"guide","icon":"streams","weight":1,"srcFilePath":"src/pages/docs/recipes/index.md","id":"recipes","location":"/docs/recipes/","url":"/docs/recipes/","children":{"pagination":{"title":"Pagination","description":"","layout":"guide","icon":"flash","weight":2,"srcFilePath":"src/pages/docs/recipes/pagination.md","id":"pagination","location":"/docs/recipes/pagination.html","url":"/docs/recipes/pagination.html"},"sparse-fieldsets":{"title":"Sparse Fieldsets","description":"","layout":"guide","icon":"flash","weight":3,"srcFilePath":"src/pages/docs/recipes/sparse-fieldsets.md","id":"sparse-fieldsets","location":"/docs/recipes/sparse-fieldsets.html","url":"/docs/recipes/sparse-fieldsets.html","active":true}},"childIds":["pagination","sparse-fieldsets"],"active":true},"introduction":{"title":"Introduction to Evolvable APIs","description":"Evolvable REST APIs are specially useful in contexts where the consumers are not written by the same development team as the server side API. Even more so, when the deployment and update of the consumers is specially challenging, as happens with native mobile applications and even more so, consumers present in IoT devices.","layout":"guide","icon":"streams","weight":1,"srcFilePath":"src/pages/docs/introduction/index.md","id":"introduction","location":"/docs/introduction/","url":"/docs/introduction/","children":{"techniques":{"title":"Useful techniques to make your APIs evolvable","description":"","layout":"guide","icon":"flash","weight":2,"srcFilePath":"src/pages/docs/introduction/techniques.md","id":"techniques","location":"/docs/introduction/techniques.html","url":"/docs/introduction/techniques.html"},"versioning":{"title":"Versioning your API contract","description":"","layout":"guide","icon":"flash","weight":3,"srcFilePath":"src/pages/docs/introduction/versioning.md","id":"versioning","location":"/docs/introduction/versioning.html","url":"/docs/introduction/versioning.html"}},"childIds":["techniques","versioning"]}},"childIds":["introduction","recipes","search"],"active":true},"updates":{"title":"Updates","description":"Check out what\'s new","updates":[{"version":"0.0.3","major":true,"features":[{"icon":"code-file","title":"Added \'Recipes\' section.","description":"Recipes section will include small bits of useful help to add to your API features that can help with its evolvability."},{"icon":"code-file","title":"Introduction section in docs.","description":"The Guidelines section have been turned into Introduction section in docs."}]},{"version":"0.0.2","major":true,"features":[{"icon":"flash","title":"Added main information on landing page","description":"First version of the landing page with more info on the main concepts and why Evolvable APIs are needed."},{"icon":"code-file","title":"First draft of the Guidelines","description":"The Guidelines are a set of good practices and advice on what we should take into account in order to make our REST APIs evolvable."}]},{"version":"0.0.1","major":true,"features":[{"icon":"hammer","title":"Very first version of evolvable-apis.org","description":"This version is targeted to very early adopters. API Developers who believe there has to be a better way to do APIs so that they an evolve seamlessly over the years. And who want to participate and make it a reality."}]}],"srcFilePath":"src/pages/updates/index.soy","id":"updates","location":"/updates/","url":"/updates/"}},"childIds":["docs","updates"]},"basePath":"","topbar":[{"href":"/docs/introduction/index.html","label":"Docs","selected":true},{"href":"/updates/","label":"Updates"}]}}'; if (typeof electric !== 'undefined') {electric.init(data);}else {document.addEventListener('DOMContentLoaded', function() {electric.init(data);});}</script></div><script data-senna-track="permanent" src="/js/electric/electric.js"></script></body></html>