<!DOCTYPE html><html><head><meta charset="UTF-8"><meta content="minimum-scale=1.0, width=device-width" name="viewport"><meta name="description" content=""><title>Pagination - Evolvable APIs</title><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700|Roboto+Mono"><link rel="stylesheet" href="/vendor/galano/galano.css"><link rel="stylesheet" href="/vendor/icon-12/icon-12.css"><link rel="stylesheet" href="/vendor/icon-16/icon-16.css"><link rel="stylesheet" href="/vendor/senna/senna.css"><link rel="stylesheet" href="/vendor/codemirror/lib/codemirror.css"><link rel="stylesheet" href="/vendor/codemirror/theme/dracula.css"><script src="/js/bundles/shared.electric.js"></script><script src="/vendor/senna/senna.js"></script><script src="/vendor/codemirror/lib/codemirror.js"></script><script src="/vendor/codemirror/mode/css/css.js"></script><script src="/vendor/codemirror/mode/javascript/javascript.js"></script><script src="/vendor/codemirror/mode/xml/xml.js"></script><link rel="stylesheet" href="/styles/main.css"></head><body data-senna=""><div data-senna-surface="" id="wrapper"><div class="senna-loading-bar"></div><div id="pageComponent"><div class="main"><main class="guide"><div class="docs"><nav class="topbar topbar-light topbar-docs"><div class="topbar-logo"><a class="topbar-logo-link" href="/"><span class="topbar-logo-icon icon-16-hammer"></span><h3 class="topbar-logo-text">Evolvable APIs</h3></a></div><nav class="topbar-menu"><button class="topbar-toggle">Menu</button><ul class="topbar-list"><li class="topbar-item"><a class="topbar-link topbar-link-selected" href="/docs/introduction/index.html" target="undefined"><span>Docs</span></a></li><li class="topbar-item"><a class="topbar-link " href="/updates/" target="undefined"><span>Updates</span></a></li></ul></nav></nav><div class="ribbon-container"><div class="ribbon ribbon-accent">Beta</div></div><nav class="sidebar"><a class="sidebar-header toggler-header-collapsed"><span class="sidebar-icon icon-16-menu"></span><span>Docs Menu</span><span class="sidebar-icon-right"><span class="icon-12-arrow-down-short"></span><span class="icon-12-arrow-up-short"></span></span></a><div class="sidebar-toggler-content toggler-collapsed"><div class="sidebar-search"><div class="page-autocomplete"><div class="form-group"><div class="input-inner-addon input-inner-addon-right"><input autocomplete="off" class="form-control" name="q" placeholder="Search Docs" ref="input" required="" type="text"><span class="input-inner-icon-helper icon-16-magnifier"></span></div></div></div></div><nav class=""><ul class="sidebar-list sidebar-list-1"><li class="sidebar-item"><a class="sidebar-link " href="/docs/introduction/"><span class="sidebar-icon icon-16-streams"></span><span>Introduction to Evolvable APIs</span></a><nav class=""><ul class="sidebar-list sidebar-list-1"><li class="sidebar-item"><a class="sidebar-link " href="/docs/introduction/techniques.html"><span class="sidebar-icon icon-16-flash"></span><span>Foundational techniques to make your APIs evolvable</span></a></li><li class="sidebar-item"><a class="sidebar-link " href="/docs/introduction/versioning.html"><span class="sidebar-icon icon-16-flash"></span><span>Versioning your API contract</span></a></li></ul></nav></li><li class="sidebar-item active"><a class="sidebar-link sidebar-link-selected" href="/docs/recipes/"><span class="sidebar-icon icon-16-streams"></span><span>Recipes (towards Evolvable APIs)</span></a><nav class=""><ul class="sidebar-list sidebar-list-1"><li class="sidebar-item active"><a class="sidebar-link sidebar-link-selected" href="/docs/recipes/pagination.html"><span class="sidebar-icon icon-16-flash"></span><span>Pagination</span></a></li><li class="sidebar-item"><a class="sidebar-link " href="/docs/recipes/sparse-fieldsets.html"><span class="sidebar-icon icon-16-flash"></span><span>Sparse Fieldsets</span></a></li></ul></nav></li></ul></nav></div></nav><div class="sidebar-offset"><header class="guide-header"><div class="container-hybrid"><h1 class="title">Pagination</h1></div></header><div class="container-hybrid"><div class="docs-guide row"><div class="docs-content col-xs-16 col-md-9"><div class="guide-content"><article id="1"><h2>Context</h2><p>Let’s say that you have created a service that returns the list of members (persons) of your site. Initially, you modeled the list to contain the basic information for each of those persons:</p><div class="code-container"><button class="btn btn-sm btn-copy"><span class="icon-12-overlap"></span></button><pre><code class="code" data-mode="text" ref="code">GET api/members</code></pre></div><p>And the service returns that list, for example with the following structure:</p><div class="code-container"><button class="btn btn-sm btn-copy"><span class="icon-12-overlap"></span></button><pre><code class="code" data-mode="javascript" ref="code">{
   "members" : [
     {
      "gender": "female",
      "name": "Sophia Hart",
      "birthDate": "1975-04-12T00:00Z",
      "email": "sophia.hart@example.com",
     },
     {
      "gender": "male",
      "name": "John Doe",
      "birthDate": "1977-03-15T00:00Z",
      "email": "john.doe@email.com",
     }     
   ]
}</code></pre></div><p>And it seems right at first, it serves it purpose. But soon new members start to register to your site, and the list starts growing, and growing until it reaches for example 1.000 users.</p><p>That’s a big amount of information to retrieve at once, and, on top of that, probably your API consumer is not going to show to its user all that information at once (the user probably won’t go through a 1.000 items list in any case).</p></article><article id="2"><h2>Need</h2><p>At that point you decide that you need to add some pagination mechanism (you will also add want to add filtering mechanisms to your API, but you still will benefit from pagination in the case the request does not include any filtering criteria).</p></article><article id="3"><h2>Solution</h2><p>So, let’s start with an outline of which information is important to handle the pagination:</p><ol><li><p>The first, of course is the list of contents (in this case, the members). That does not change</p></li><li><p>Adding information on the page in which you are, the number of elements contained on the page, optionally the total number of elements (or approximation) or the total number of pages.</p></li><li><p>Some links to navigate to</p><ul><li><p>The next page of the search (if there is one)s</p></li><li><p>The previous page (if you are not returning the first one)</p></li><li><p>The very first page.</p></li><li><p>Optionally the very last page.</p></li></ul></li></ol><p>So, the first change to our response design will be to wrap, or embed the list of items in an specific property which contains that list:</p><div class="code-container"><button class="btn btn-sm btn-copy"><span class="icon-12-overlap"></span></button><pre><code class="code" data-mode="javascript" ref="code">{
  "_embedded" : {
    "members" : [

        /*...*/
     ]
  }
}</code></pre></div><p>Now we can add the information of the number of elements, and how many elements we are returning as part of the current page:</p><div class="code-container"><button class="btn btn-sm btn-copy"><span class="icon-12-overlap"></span></button><pre><code class="code" data-mode="javascript" ref="code">{
  "count" : 20,
  "total" : 1017,
  "_embedded" : {
    "members" : [
        /*...*/
     ]
  }
}</code></pre></div><p>Now, the last step is adding, information to allow to navigate to the first, previous and/or next pages, depending on the page that your are returning. In order to add those links, we are going to stick to the standards, and there is one that addresses specifically how to add links: The <a href="https://www.iana.org/assignments/link-relations/link-relations.xml">IANA Link relations</a>. We will group all those navigation links under the same attribute:</p><div class="code-container"><button class="btn btn-sm btn-copy"><span class="icon-12-overlap"></span></button><pre><code class="code" data-mode="javascript" ref="code">{
  "_links": {
      "self": {
          "href": "http://example.org/api/members?page=3"
      },
      "first": {
          "href": "http://example.org/api/members"
      },
      "prev": {
          "href": "http://example.org/api/members?page=2"
      },
      "next": {
          "href": "http://example.org/api/members?page=4"
      },
      "last": {
          "href": "http://example.org/api/members?page=51"
      }
  },
  "count" : 20,
  "total" : 1017,
  "_embedded" : {
    "members" : [
       {
        "gender": "female",
        "name": "Sophia Hart",
        "birthDate": "1975-04-12T00:00Z",
        "email": "sophia.hart@example.com",
       },
       {
        "gender": "male",
        "name": "John Doe",
        "birthDate": "1977-03-15T00:00Z",
        "email": "john.doe@email.com",
       }     
     ]
  }
}</code></pre></div><p>In this example, we have used the structure and attribute names that <a href="https://en.wikipedia.org/wiki/Hypertext_Application_Language">HAL</a> proposes. There are some other alternatives based on Collection+JSON, Siren, or others.</p><p></p></article><input type="hidden" value="Pagination"><input type="hidden" value="Evolvable APIs"></div><div class="contribute"><div class="contribute-img"><span class="icon-16-github"></span></div><div class="contribute-text"><p>Contribute on Github! <a href="https://github.com/liferay/evolvable-apis.org/tree/master/src/pages/docs/recipes/pagination.md" class="contribute-link" target="_blank">Edit this section</a>.</p></div></div></div><nav class="col-xs-16 col-md-offset-2 col-md-5"><div class="docs-nav-container"><div class="affix-top docs-nav"><div ref="readingContainer"></div></div></div></nav></div></div></div></div></main></div></div><script src="/js/bundles/KlQes.js"></script><script>var data = '{"pageLocation":"index.children.docs.children.recipes.children.pagination","site":{"title":"Evolvable APIs","githubRepo":"liferay/evolvable-apis.org","googleAnalytics":"UA-37033501-12","index":{"title":"Home","description":"Embrace rapid evolution without breaking consumers.","srcFilePath":"src/pages/index.soy","id":"pages","location":"/./","url":"/./","children":{"updates":{"title":"Updates","description":"Check out what\'s new","updates":[{"version":"0.0.3","major":true,"features":[{"icon":"code-file","title":"Added \'Recipes\' section.","description":"Recipes section will include small bits of useful help to add to your API features that can help with its evolvability."},{"icon":"code-file","title":"Introduction section in docs.","description":"The Guidelines section have been turned into Introduction section in docs."}]},{"version":"0.0.2","major":true,"features":[{"icon":"flash","title":"Added main information on landing page","description":"First version of the landing page with more info on the main concepts and why Evolvable APIs are needed."},{"icon":"code-file","title":"First draft of the Guidelines","description":"The Guidelines are a set of good practices and advice on what we should take into account in order to make our REST APIs evolvable."}]},{"version":"0.0.1","major":true,"features":[{"icon":"hammer","title":"Very first version of evolvable-apis.org","description":"This version is targeted to very early adopters. API Developers who believe there has to be a better way to do APIs so that they an evolve seamlessly over the years. And who want to participate and make it a reality."}]}],"srcFilePath":"src/pages/updates/index.soy","id":"updates","location":"/updates/","url":"/updates/"},"docs":{"title":"Docs","url":"/docs/introduction/index.html","layout":false,"srcFilePath":"src/pages/docs/index.soy","id":"docs","location":"/docs/","customURL":true,"children":{"search":{"description":"Documentation search results.","hidden":true,"title":"Search","srcFilePath":"src/pages/docs/search.soy","id":"search","location":"/docs/search.html","url":"/docs/search.html"},"introduction":{"title":"Introduction to Evolvable APIs","description":"Evolvable REST APIs are specially useful in contexts where the consumers are not written by the same development team as the server side API. Even more so, when the deployment and update of the consumers is specially challenging, as happens with native mobile applications and even more so, consumers present in IoT devices.","layout":"guide","icon":"streams","weight":1,"srcFilePath":"src/pages/docs/introduction/index.md","id":"introduction","location":"/docs/introduction/","url":"/docs/introduction/","children":{"techniques":{"title":"Foundational techniques to make your APIs evolvable","description":"","layout":"guide","icon":"flash","weight":2,"srcFilePath":"src/pages/docs/introduction/techniques.md","id":"techniques","location":"/docs/introduction/techniques.html","url":"/docs/introduction/techniques.html"},"versioning":{"title":"Versioning your API contract","description":"","layout":"guide","icon":"flash","weight":3,"srcFilePath":"src/pages/docs/introduction/versioning.md","id":"versioning","location":"/docs/introduction/versioning.html","url":"/docs/introduction/versioning.html"}},"childIds":["techniques","versioning"]},"recipes":{"title":"Recipes (towards Evolvable APIs)","description":"Making an API Evolvable is about how many different challenges are designed or implemented when we build it. Maybe you do not need to solve all of them for your case. In this section, we will provide some individual recipes on how to address each of this facets.","layout":"guide","icon":"streams","weight":1,"srcFilePath":"src/pages/docs/recipes/index.md","id":"recipes","location":"/docs/recipes/","url":"/docs/recipes/","children":{"pagination":{"title":"Pagination","description":"","layout":"guide","icon":"flash","weight":2,"srcFilePath":"src/pages/docs/recipes/pagination.md","id":"pagination","location":"/docs/recipes/pagination.html","url":"/docs/recipes/pagination.html","active":true},"sparse-fieldsets":{"title":"Sparse Fieldsets","description":"","layout":"guide","icon":"flash","weight":3,"srcFilePath":"src/pages/docs/recipes/sparse-fieldsets.md","id":"sparse-fieldsets","location":"/docs/recipes/sparse-fieldsets.html","url":"/docs/recipes/sparse-fieldsets.html"}},"childIds":["pagination","sparse-fieldsets"],"active":true}},"childIds":["introduction","recipes","search"],"active":true}},"childIds":["docs","updates"]},"basePath":"","topbar":[{"href":"/docs/introduction/index.html","label":"Docs","selected":true},{"href":"/updates/","label":"Updates"}]}}'; if (typeof electric !== 'undefined') {electric.init(data);}else {document.addEventListener('DOMContentLoaded', function() {electric.init(data);});}</script></div><script data-senna-track="permanent" src="/js/electric/electric.js"></script></body></html>